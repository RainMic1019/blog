---
title: MySQL外键约束删除和更新时各取值的含义
date: 2018-11-27
categories:
 - 数据库
tags:
 - SQL
 - 数据库
---

## 1 删除时属性

### 1.1 RESTRICT（默认属性）

当在父表（即外键的来源表）中删除对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除。

### 1.2 No ACTION

当在父表（即外键的来源表）中删除对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除。

### 1.3 CASCADE

当在父表（即外键的来源表）中删除对应记录时，首先检查该记录是否有对应外键，如果有则也删除外键在子表（即包含外键的表）中的记录。

### 1.4 SET NULL

当在父表（即外键的来源表）中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（不过这就要求该外键允许取null）。

## 2 更新时属性

### 2.1 RESTRICT（默认属性）

则当在父表（即外键的来源表）中更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许更新。

### 2.2 No ACTION

则当在父表（即外键的来源表）中更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许更新。

### 2.3 CASCADE

当在父表（即外键的来源表）中更新对应记录时，首先检查该记录是否有对应外键，如果有则也更新外键在子表（即包含外键的表）中的记录。

### 2.4 SET NULL

当在父表（即外键的来源表）中更新对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（不过这就要求该外键允许取null）。

## 总结

外键的使用对于减少数据库冗余性，以及保证数据完整性和一致性有很大作用。

另外注意，如果两张表之间存在外键关系，则MySQL不能直接删除表(Drop Table)，而应该先删除外键，之后才可以删除。所以一般默认就好（RESTRICT）。
